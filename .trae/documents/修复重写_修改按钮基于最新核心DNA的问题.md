# 修改方案：修复重写/修改按钮基于最新核心DNA的问题

## 问题分析
当重写/修改核心DNA时，系统并没有将当前的核心DNA作为输入，而是只使用了基础设定等信息。这是因为PROMPTS.DNA模板的输入信息中没有包含STORY_DNA变量，导致生成的结果不是基于最新的核心DNA进行重写的。

## 具体修改点

### 1. 修改PROMPTS.DNA模板
- **位置**：constants.ts:238-276
- **修改前**：模板的输入信息中没有包含STORY_DNA变量
- **修改后**：在模板的输入信息中添加核心DNA信息，确保重写是基于最新的核心DNA进行的

### 2. 更新模板的生成结果格式
- **分析**：当前模板的生成结果格式已经包含了核心DNA，无需修改
- **影响**：确保生成的结果包含完整的基础设定+核心DNA格式

### 3. 验证handleGenerateStep函数
- **位置**：App.tsx:341-407
- **分析**：该函数已经包含了STORY_DNA变量，无需修改
- **影响**：确保重写/修改按钮调用该函数时，能够将最新的核心DNA传递给模板

## 预期效果
1. 重写/修改核心DNA时，系统会将当前的核心DNA作为输入
2. 生成的结果是基于最新的核心DNA进行重写的
3. 解决了用户报告的问题
4. 保持了功能的完整性和稳定性

## 技术说明
通过修改PROMPTS.DNA模板，在其输入信息中添加核心DNA信息，确保重写是基于最新的核心DNA进行的。这将解决用户报告的问题，确保重写/修改按钮能够基于最新的核心DNA进行重写。