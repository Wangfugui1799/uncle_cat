## 问题分析

角色状态库卡片滚动问题的根源在于布局结构设计不当：
- 右侧角色状态区（`.col-span-1.lg:col-span-2`）设置了 `overflow-y-auto`，导致整个区域可以滚动
- 内部卡片（`.bg-gray-800/30.rounded-xl`）虽然设置了 `h-full`，但由于父容器的滚动设置，其边框和圆角样式在内容滚动时会失效
- 滚动条出现在外层区域，而不是内层卡片上，导致卡片视觉效果受损

## 修复方案

1. **调整右侧角色状态区样式**：
   - 移除 `overflow-y-auto`，添加 `h-full` 确保填满父容器
   - 保持 `p-6` 内边距，确保卡片有足够的外边距

2. **修改内层卡片样式**：
   - 添加 `overflow-y-auto` 实现卡片内滚动
   - 保持 `h-full` 确保卡片高度正确
   - 添加 `max-h-full` 确保卡片不会超出父容器
   - 保留现有的边框、圆角和阴影样式

3. **优化卡片内容布局**：
   - 确保 MarkdownViewer 内容正确渲染在卡片内部
   - 保持卡片标题固定，只滚动内容区域

## 具体修改点

**文件**：`d:\trae\deepstory-build\App.tsx`
**行号**：798-804

**修改前**：
```tsx
<div className="col-span-1 lg:col-span-2 p-6 overflow-y-auto">
    <div className="bg-gray-800/30 rounded-xl p-5 border border-gray-700/50 shadow-inner h-full">
        <h3 className="text-sm font-bold text-purple-300 uppercase mb-3 flex items-center">
            <Users size={16} className="mr-2"/> 角色状态档案
        </h3>
        <MarkdownViewer content={currentArchive.characterState} />
    </div>
</div>
```

**修改后**：
```tsx
<div className="col-span-1 lg:col-span-2 p-6 h-full">
    <div className="bg-gray-800/30 rounded-xl p-5 border border-gray-700/50 shadow-inner h-full max-h-full overflow-y-auto">
        <h3 className="text-sm font-bold text-purple-300 uppercase mb-3 flex items-center sticky top-0 bg-gray-800/30 py-2 -mx-5 px-5 z-10">
            <Users size={16} className="mr-2"/> 角色状态档案
        </h3>
        <MarkdownViewer content={currentArchive.characterState} />
    </div>
</div>
```

## 预期效果

- 滚动条将出现在角色状态档案卡片内部，而不是整个右侧区域
- 卡片的边框、圆角和阴影样式将始终可见，不会随内容滚动而消失
- 卡片标题将固定在顶部，方便用户查看当前内容类别
- 整体布局更加美观，符合用户对卡片式设计的预期

## 技术要点

- 利用 CSS `overflow` 属性控制滚动区域
- 使用 `sticky` 定位实现标题固定
- 确保嵌套 `h-full` 类的正确使用，实现高度的正确继承
- 优化 Z-index 确保固定标题显示在内容上方

这个修复方案将解决角色状态库卡片跟随滚动条一起滚动的问题，提升用户体验和视觉效果。