**问题分析**：

1. 当 `PromptEditorModal` 打开时，它覆盖了整个屏幕（`fixed inset-0`），导致章节切换按钮被遮挡
2. 模态框的 `z-index` 很高（`z-50`），用户无法点击底层的章节切换按钮
3. 即使能切换章节，当前的 `useEffect` 依赖项中没有包含 `writingStepState.viewChapter`，完整提示词不会自动更新

**解决方案**：
在 `PromptEditorModal` 中添加章节选择功能，允许用户在模态框内切换章节，并自动更新完整提示词。

**修改内容**：

1. **修改** **`PromptEditorModal`** **组件**：

   * 添加章节选择相关的 props

   * 在模态框中添加章节选择器

   * 当章节变化时，调用父组件的回调函数更新当前查看的章节

2. **修改** **`App`** **组件**：

   * 更新 `useEffect` 依赖项，添加 `writingStepState.viewChapter`

   * 修改 `handleShowPrompt` 函数，传递当前章节信息

3. **修改** **`WritingStep`** **组件**：

   * 更新 `onEditPrompt` 调用，传递当前章节信息

**具体实现步骤**：

1. **更新** **`PromptEditorModal`** **组件**：

   * 添加 `currentChapter`、`totalChapters` 和 `onChapterChange` props

   * 在模态框头部添加章节选择器

   * 当章节变化时，调用 `onChapterChange` 回调函数

2. **更新** **`App`** **组件**：

   * 更新 `useEffect` 依赖项，添加 `writingStepState.viewChapter`

   * 修改 `generateFullPrompt` 函数，确保使用正确的章节号

   * 修改 `handleShowPrompt` 函数，传递当前章节信息

3. **更新** **`WritingStep`** **组件**：

   * 更新 `onEditPrompt` 调用，传递当前章节号

**预期效果**：

* 当提示词模态框打开时，用户可以在模态框内切换章节

* 切换章节后，完整提示词会自动更新，反映当前章节的信息

* 用户无需关闭模态框即可查看不同章节的完整提示词

**修改位置**：

* `components/Modals.tsx`：`PromptEditorModal` 组件

* `App.tsx`：`useEffect` 依赖项和相关函数

* `components/WritingStep.tsx`：`onEditPrompt` 调用

**技术要点**：

* 使用 React 的状态管理和回调函数实现组件间通信

* 确保 `useEffect` 依赖项完整，能够捕获所有相关状态变化

* 保持 UI 设计的一致性和易用性

* 确保模态框内的章节选择器与主界面的章节切换保持同步

